<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>BakÄ±m Modu Temizleme - ACÄ°L</title>
    <style>
        body { 
            font-family: Arial; 
            padding: 20px; 
            background: #f0f0f0; 
        }
        .container { 
            background: white; 
            padding: 30px; 
            border-radius: 10px; 
            max-width: 600px; 
            margin: 50px auto; 
        }
        button { 
            background: #dc2626; 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px; 
            margin: 10px; 
        }
        .success { background: #16a34a; }
        .info { 
            background: #dbeafe; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 15px 0; 
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš¨ BAKIM MODU TEMÄ°ZLEME</h1>
        <div class="info">
            <strong>Problem:</strong> BakÄ±m modu aÃ§Ä±k kaldÄ±, admin giriÅŸi engelleniyor.
        </div>

        <button onclick="clearMaintenance()">ğŸ—‘ï¸ BAKIM MODUNU TEMÄ°ZLE</button>
        <button class="success" onclick="goToLogin()">ğŸ” LOGÄ°N SAYFASINA GÄ°T</button>

        <div id="result" style="margin-top: 20px;"></div>
        
        <div style="margin-top: 30px; font-size: 14px; color: #666;">
            <strong>Manuel Ã§Ã¶zÃ¼m iÃ§in:</strong><br>
            1. F12 â†’ Application â†’ Local Storage â†’ your-domain<br>
            2. <code>b2b_system_config</code> ve <code>b2b_user_settings</code> item'larÄ±nÄ± silin<br>
            3. SayfayÄ± yenileyin
        </div>
    </div>

    <script>
        function clearMaintenance() {
            try {
                // TÃ¼m config ve ayarlarÄ± temizle
                localStorage.removeItem('b2b_system_config');
                localStorage.removeItem('b2b_user_settings');
                sessionStorage.clear();
                
                // Yeni temiz config oluÅŸtur
                const cleanConfig = {
                    settings: {
                        stock: { visibility: true, lowStockThreshold: 10 },
                        price: { currency: "TRY", showTax: true },
                        display: { language: "tr", theme: "light" },
                        features: { multiSession: true, notifications: true },
                        security: { storageType: "sessionStorage" },
                        dashboard: { showStats: true }
                    },
                    system: {
                        companyName: "B2B TRADE PRO",
                        version: "1.0.0",
                        maintenance: false, // â¬…ï¸ BURASI FALSE!
                        maintenanceMessage: "",
                        environment: "production"
                    },
                    theme: {
                        colors: { primary: "#2563eb", success: "#16a34a" }
                    },
                    lastUpdated: new Date().toISOString()
                };
                
                localStorage.setItem('b2b_system_config', JSON.stringify(cleanConfig));
                
                document.getElementById('result').innerHTML = `
                    <div style="background: #dcfce7; color: #166534; padding: 15px; border-radius: 5px;">
                        âœ… <strong>BAÅARILI!</strong> BakÄ±m modu kapatÄ±ldÄ±.<br>
                        â€¢ maintenance: <strong>false</strong><br>
                        â€¢ TÃ¼m storage temizlendi<br>
                        â€¢ Yeni config oluÅŸturuldu
                    </div>
                `;
                
                console.log('âœ… BakÄ±m modu temizlendi!');
                
            } catch (error) {
                document.getElementById('result').innerHTML = `
                    <div style="background: #fecaca; color: #dc2626; padding: 15px; border-radius: 5px;">
                        âŒ <strong>HATA!</strong> ${error.message}
                    </div>
                `;
            }
        }

        function goToLogin() {
            window.location.href = '/login.html';
        }

        // Sayfa yÃ¼klendiÄŸinde mevcut durumu gÃ¶ster
        document.addEventListener('DOMContentLoaded', function() {
            const currentConfig = localStorage.getItem('b2b_system_config');
            if (currentConfig) {
                try {
                    const config = JSON.parse(currentConfig);
                    const isMaintenance = config.system?.maintenance;
                    document.getElementById('result').innerHTML = `
                        <div style="background: #fef3c7; color: #92400e; padding: 15px; border-radius: 5px;">
                            ğŸ“Š <strong>MEVCUT DURUM:</strong><br>
                            â€¢ BakÄ±m Modu: <strong>${isMaintenance ? 'AKTÄ°F ğŸš§' : 'PASÄ°F âœ…'}</strong><br>
                            â€¢ Mesaj: "${config.system?.maintenanceMessage || 'Yok'}"<br>
                            â€¢ Versiyon: ${config.system?.version || 'Bilinmiyor'}
                        </div>
                    `;
                } catch (e) {
                    console.error('Config okuma hatasÄ±:', e);
                }
            }
        });
    </script>
</body>
</html>